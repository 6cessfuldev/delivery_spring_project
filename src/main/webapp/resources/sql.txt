create database deliverydb;
use mysql;

-- 유저생성구문
create user 'springUser'@'localhost' identified by 'mysql';

-- 권한생성구문
grant all privileges on deliverydb.* to 'springUser'@'localhost' identified by 'mysql';

-- 변경내용 메모리에 반영(적용완료)
flush privileges;
  
  
## user(회원)

create table user(
user_id varchar(40) not null,
user_email varchar(40) not null,
user_pw varchar(500),
user_name varchar(40) not null,
user_phone varchar(40) not null,
user_birth date not null,
user_naver_id varchar(40) not null,
user_register_date datetime default now(),
user_modify_date datetime,
user_isAdmin tinyint(1) default 0,
primary key(user_id));


## diner(음식점)

create table diner(
diner_code int auto_increment,
file_code int,
diner_name varchar(50) not null,
diner_min_pay int,
diner_address varchar(200) not null,
diner_notice text,
diner_open_time time,
diner_close_time time,
diner_method_pay varchar(20),
diner_business_name varchar(50),
diner_company_num varchar(12),
diner_category varchar(15),
diner_delivery_fee int default 0,
diner_addr_point point,
diner_score_avg bouble,
primary key(diner_code));


## choice(옵션)

create table choice(
choice_code int not null auto_increment,
food_code int not null,
choice_content varchar(45) not null,
choice_price int not null,
primary key(choice_code));


## basket(장바구니)

create table basket(
basket_code int not null auto_increment,
user_id varchar(40) not null,
food_code int not null,
basket_order_count int not null,
primary key(basket_code));


## basket_detail(장바구니 상세)  

create table basket_detail(
basket_code int not null,
choice_code int not null);


## login(로그인기록)

create table login(
log_code int not null auto_increment,
user_id varchar(40) not null,
log_date datetime,
log_out_date datetime,
log_fail_count tinyint(1) not null default 0,
primary key(log_code));



## order(주문내역)

create table order(
order_code int not null auto_increment,
diner_code int not null,
user_id varchar(40),
order_date datetime default now(),
order_pay_method varchar(30),
order_state varchar(40) not null default '주문접수 대기중',
order_phone varchar(40) not null,
order_address1 varchar(200) not null,
order_address2 varchar(200) not null,
order_address3 varchar(200) not null,
order_total_price int not null,
order_used_point int default 0,
order_request varchar(2000),
order_IMP_UID varchar(30),
primary key(order_code));


## order_food(주문메뉴)

create table order_food(
order_food_code int not null auto_increment,
user_id varchar(40) not null,
food_code int not null,
order_food_count int not null,
order_food_price int not null,
primary key(order_food_code));

## review (리뷰)
review_taste_score 삭제
review_amount_score 삭제
review_delivery_score 삭제

review_score int 추가
